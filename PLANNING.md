# 출퇴근 비용 계산기 - 기획 및 개발 문서

**노아에이티에스㈜ 2026년 신입사원 채용 사전과제**  
**주제:** 9번 - 자동차 vs 대중교통  
**제출일:** 2026.02.13

---

## 1. 문제 정의

### 1.1 배경 및 문제 인식

서울/수도권 직장인의 평균 통근 시간은 편도 60분 이상이며, 자동차 구매는 감정적 판단이 개입되기 쉬운 의사결정이다.

**특히 사회초년생의 경우:**
- 월급은 제한적이고
- 차량 유지비에 대한 정확한 인식이 부족하며
- 시간 가치(기회비용)를 고려하지 않는다

**현실의 문제:**
대부분의 사람들은 차량 구매 여부를 판단할 때 "유류비"만 고려하고, 감가상각, 보험, 세금, 정비비, 그리고 **통근 시간의 기회비용**까지 포함한 총비용(TCO, Total Cost of Ownership)을 계산하지 않는다.

### 1.2 핵심 문제 정의

**"내 상황에서 차를 사는 것이 합리적인가?"**

이 질문에 답하기 위해서는:
1. 대중교통과 자동차의 **월 총비용**을 정확히 비교해야 하고
2. 통근 시간 차이를 **금전적 가치로 환산**하여 포함/제외할 수 있어야 하며
3. 차량 구매 비용을 회수하는 **손익분기점**을 알아야 한다

### 1.3 의사결정 프레임워크

**"합리적"의 기준은 사용자마다 다르다.**

본 서비스는 사용자가 자신의 가치 기준에 따라 판단할 수 있도록 다층적 관점을 제공한다:

#### (1) 월 현금흐름 관점
- **질문:** "매달 실제로 나가는 돈은 얼마인가?"
- **제공:** 대중교통 vs 자동차 월 비용 비교 (시간비용 제외)
- **타겟:** 현금흐름이 빠듯한 사회초년생, 월급 기반 예산 관리자

#### (2) 장기 총비용 관점 (TCO)
- **질문:** "차량 구매 비용까지 포함하면 언제 본전인가?"
- **제공:** 손익분기점 계산 (감가상각 포함)
- **타겟:** 장기 재무 계획을 세우는 사용자, 투자 대비 효과 중시

#### (3) 시간 가치 관점
- **질문:** "통근 시간 단축을 돈으로 환산하면 얼마인가?"
- **제공:** 시간비용 토글 (포함/제외 비교)
- **타겟:** 시간을 돈으로 환산하는 고소득자, 자기계발 시간 중시

#### (4) 삶의 질 관점 (정성적)
- **질문:** "편의성, 프라이버시, 스트레스는 어떻게 고려하나?"
- **제공:** 수치화 불가능한 요소는 사용자 판단에 위임
- **안내:** "비용이 비슷하다면 편의성을 고려하세요" 메시지

**핵심 인사이트:**  
사람들은 자동차 구매를 비용이 아니라 **"라이프스타일 소비"**로 인식하는 경향이 있다.  
본 서비스는 그 감정적 소비를 수치화하여 **재정 의사결정의 영역으로 이동**시키는 도구다.

본 서비스는 "차를 사라/사지 마라"를 강요하지 않는다.  
대신 **"당신의 기준으로 판단할 수 있는 객관적 데이터"**를 제공한다.  
시간비용 토글이 바로 이 철학의 구현이다.

### 1.4 해결 목표

본 서비스는 다음을 제공한다:

1. **월 총비용 비교**: 대중교통 vs 자동차의 실제 비용 산출
2. **시간 가치 토글**: 통근 시간의 기회비용 포함/제외 선택 가능
3. **손익분기점 계산**: 차량 구매 비용 회수 시점 제시
4. **시각화**: 비용 구성을 차트로 직관적 표현
5. **현실적 시나리오 지원**: 현재 차량 보유, 할부금 잔액, 차량 교체 등 실제 상황 반영

### 1.4 대상 사용자

**주 타겟:**
- 통근시간 60분 이상 직장인
- 차량 구매를 고민하는 사회초년생 (연봉 3,000~5,000만원)
- 이미 차량 보유 중이나 유지 여부 고민 중인 사용자

**부 타겟:**
- 차량 교체를 고민하는 기존 차량 소유자
- 대중교통 vs 자동차 비용을 객관적으로 비교하고 싶은 모든 직장인

### 1.5 사용자 시나리오

**시나리오 1: 사회초년생 김노아 (차량 구매 고민)**
1. 집에서 회사까지 거리 32km, 대중교통 90분, 자동차 50분
2. 2,500만원 중고차 구매 고민 중
3. 챗봇 형식으로 단계별 정보 입력
4. 시간 가치 포함 시: 대중교통이 유리 / 제외 시: 자동차가 유리
5. 토글로 두 시나리오를 비교하며 의사결정

**시나리오 2: 기존 차량 소유자 이노아 (유지 vs 처분)**
1. 현재 1,000만원 시세 차량 보유, 할부금 50만원 잔액
2. 차량 유지 vs 처분 후 대중교통 이용 고민
3. "현재 차량으로 계산" 선택 → 감가상각 0원 처리
4. 월 유지비만으로 비교 가능
5. 경제적 판단 근거 확보


### 1.6 핵심 기능 vs 부가 기능

**핵심 기능 (MVP):**
- 대중교통 vs 자동차 월 총비용 계산
- 감가상각, 유류비, 보험, 세금, 주차비, 통행료, 정비비 포함
- 시간 가치(기회비용) 계산 및 토글
- 손익분기점 계산
- 차트 시각화 (막대 그래프, 도넛 차트)
- 챗봇 형식 단계별 입력 UX

**부가 기능 (구현 완료):**
- 현재 차량 보유 여부 및 할부금 반영
- 차량 교체 vs 유지 시나리오 분리
- 한국어 자연어 입력 파싱 (AI 활용)
- 입력값 범위 검증 및 에러 처리
- 반응형 레이아웃 (채팅 + 차트 분할)

**미구현 (시간 제약):**
- 여러 차량 비교 (1개 차량만 비교)
- 데이터 저장 및 히스토리
- 공유 기능
- 지역별 대중교통 요금 자동 조회

### 1.7 예상 엣지 케이스 및 처리 방안

| 엣지 케이스 | 처리 방안 | 구현 여부 |
|------------|----------|----------|
| 시급을 모르는 경우 | "몰라" 입력 시 시간비용 0원 처리, 명확한 안내 메시지 | 구현 완료 |
| 현재 차량 시세 < 할부금 잔액 | 음수 순가치 경고 메시지, 실제 구매 비용에 반영 | 구현 완료 |
| 차량 구매가 0원 (현재 차량 유지) | 감가상각 0원, 손익분기점 "해당 없음" 표시 | 구현 완료 |
| 한글 숫자 입력 ("이천오백만원") | Groq AI로 파싱, 로컬 파싱 실패 시 fallback | 구현 완료 |
| 차량명 입력 ("셀토스") | AI가 -1 반환, 가격 직접 입력 요청 | 구현 완료 |
| 비정상 범위 입력 (거리 1000km) | 범위 검증 후 재입력 요청, 대화형 에러 메시지 | 구현 완료 |
| 자동차가 항상 비싼 경우 | 손익분기점 Infinity, "대중교통이 항상 저렴" 표시 | 구현 완료 |


---

## 2. 개발 과정 및 반복적 개선

### 2.1 개발 타임라인

**v0.1 - 기본 계산 로직 구현 (2시간)**
- Next.js 프로젝트 초기 설정
- TypeScript 타입 정의 (CommuteInfo, CarCosts, TimeValue)
- 계산 로직 구현 (calculator.ts)
- 기본 입력 폼 UI

**v0.2 - 챗봇 UI 전환 (1.5시간)**
- 단계별 질문 flow 설계
- 메시지 기반 대화형 인터페이스
- 빠른 답변 버튼 추가
- 사용자/봇 메시지 스타일 분리 (녹색/보라색 그라데이션)

**v0.3 - 현재 차량 보유 시나리오 추가 (2시간)**
- 차량 보유 여부 질문 추가
- 현재 차량 시세 및 할부금 입력
- 차량 교체 vs 유지 분기 처리
- 순가치 계산 로직 (시세 - 할부금 잔액)

**v0.4 - 한글 입력 파싱 개선 (1시간)**
- 로컬 정규식 파싱 ("3천만원" → 30,000,000)
- 맥락 기반 단위 보정 (carPrice에서 "2천5백" → 25,000,000)
- 범위 검증 및 대화형 에러 메시지

**v0.5 - AI 파싱 통합 (Groq) (1.5시간)**
- Groq API 연동 (llama-3.1-8b-instant)
- 로컬 파싱 실패 시 AI fallback
- 한글 숫자 파싱 ("이천오백만원")
- 차량명 인식 및 거부 처리

**v0.6 - 차트 시각화 (2시간)**
- Chart.js 통합
- 막대 그래프 (월 총비용 비교)
- 도넛 차트 (자동차 비용 구성)
- 슬라이드인 애니메이션
- 채팅창 고정폭 + 차트 flex 레이아웃

**v0.7 - 시간비용 토글 (1시간)**
- includeTimeCost state 추가
- 토글 스위치 UI
- 차트 데이터 동적 업데이트
- 결과 메시지 간소화 (차트에서 상세 확인)

**v0.8 - 최종 검증 및 버그 수정 (1.5시간)**
- "몰라" 입력 시 시간비용 0원 처리
- 테스트 케이스 29개 작성 및 실행
- 코드 커버리지 96.29% 달성
- 배포 (Vercel)

**총 개발 시간: 약 12.5시간**


### 2.2 주요 의사결정 및 변경 사항

#### (1) Gemini → Groq 전환
**문제:** Gemini API 무료 쿼터 초과 (RPM 제한)  
**해결:** Groq (llama-3.1-8b-instant)로 전환, 무료 쿼터 30 RPM으로 충분  
**근거:** 숫자 파싱은 가벼운 작업이므로 8B 모델로 충분, 응답 속도도 더 빠름

#### (2) 차량명 인식 제거
**초기 설계:** AI로 "셀토스" → 가격 자동 조회  
**문제:** 중고차 시세는 연식/주행거리에 따라 천차만별  
**변경:** 차량명 입력 시 가격 직접 입력 요청, 오해 방지  
**근거:** 부정확한 자동 조회보다 사용자 직접 입력이 신뢰도 높음

#### (3) 시간비용 토글 추가
**피드백:** "시간 가치를 시급으로 환산하는 것은 가정일 뿐, 모든 사용자에게 적용되지 않음"  
**해결:** 시간비용 포함/제외를 토글로 선택 가능하게 변경  
**효과:** 사용자가 두 시나리오를 비교하며 자신의 상황에 맞는 판단 가능

#### (4) 결과 메시지 간소화
**초기:** 채팅창에 모든 비용 항목 나열 (8개 메시지)  
**문제:** 메시지가 너무 길고, 시간비용 토글과 불일치  
**변경:** 추천 메시지만 표시, 상세 내역은 차트에서 확인  
**효과:** 채팅창 깔끔, 차트의 역할 명확화

#### (5) "몰라" 입력 시 시간비용 0원 처리
**문제:** 시급 "몰라" 입력 시 기본값 20,000원 적용 → 사용자 의도와 불일치  
**해결:** "몰라" 입력 시 시급 0원, "시간 비용 제외하고 계산" 안내 메시지  
**근거:** 사용자가 모른다고 한 값을 임의로 가정하면 신뢰도 하락

### 2.3 막혔던 부분과 해결 방법

#### 문제 1: "2천5백" 파싱 오류
**증상:** "2천5백" 입력 시 2,000원으로 파싱 (25,000,000원이어야 함)  
**원인:** "백" 단독 패턴 미처리, "만" 없을 때 단위 보정 누락  
**해결:**
1. "백(?!만)" 정규식 추가
2. 한글 단위 있지만 "만" 없을 때 × 10,000 보정
3. AI fallback으로 이중 검증

#### 문제 2: 손익분기점 계산 오류
**증상:** 현재 차량 보유 시 손익분기점이 음수로 계산됨  
**원인:** purchasePrice가 0일 때 division by zero  
**해결:**
```typescript
if (car.purchasePrice === 0) {
  breakEvenMonths = 0; // 이미 차량 보유 중
}
```

#### 문제 3: 차트가 화면에 안 보임
**증상:** 계산 완료 후 차트 패널이 렌더링되지 않음  
**원인:** `max-w-4xl` 제약으로 차트 공간 부족  
**해결:** page.tsx에서 max-width 제거, flex 레이아웃으로 전환


---

## 3. AI 활용 기록

### 3.1 사용한 AI 도구

| 도구 | 용도 | 활용 빈도 |
|------|------|----------|
| **Kiro (Claude 3.7 Sonnet)** | 전체 개발 파트너, 코드 작성/리팩토링/디버깅 | 전 과정 |
| **ChatGPT-4** | 계산 로직 검증, 수학적 정확성 확인 | 5회 |
| **Claude 3.5 Sonnet** | UX 피드백, 사용자 시나리오 검토 | 3회 |
| **Groq (Llama 3.1)** | 런타임 한국어 숫자 파싱 | 프로덕션 통합 |

### 3.2 AI에게 제공한 컨텍스트

#### 초기 컨텍스트 (프로젝트 시작 시)
```
- 주제: 자동차 vs 대중교통 비용 비교 계산기
- 목표: 사회초년생이 차량 구매 여부를 경제적으로 판단할 수 있도록 지원
- 기술 스택: Next.js 15, TypeScript, Tailwind CSS
- 핵심 기능: 감가상각 포함 TCO 계산, 시간 가치 환산, 손익분기점
- 제약: 2일 내 완성, 배포 필수
```

#### 반복 개선 시 제공한 컨텍스트
- 현재 구현 상태 (코드 파일 전체)
- 발견된 버그 및 예상 원인
- 사용자 피드백 (예: "시간비용이 항상 포함되는 게 이상함")
- 테스트 케이스 결과

### 3.3 AI 결과물 검증 및 수정 사례

#### 사례 1: 감가상각 계산 로직 검증
**AI 생성 코드:**
```typescript
const depreciationMonthly = car.purchasePrice / (car.depreciationYears * 12);
```

**검증 과정:**
1. ChatGPT-4에게 "감가상각 계산이 맞는지 검증해줘" 요청
2. 정액법 vs 정률법 비교 → 정액법이 직관적이고 계산 간단
3. 엣지 케이스 확인: depreciationYears = 0일 때 division by zero
4. 수정:
```typescript
const depreciationMonthly = (car.depreciationYears > 0) 
  ? car.purchasePrice / (car.depreciationYears * 12) 
  : 0;
```

**추가 검증 (Claude 3.5):**
- "현재 차량 보유 시 감가상각을 0으로 처리하는 게 맞나?" 질문
- 답변: "이미 구매한 차량은 sunk cost이므로 월 비용 비교 시 제외하는 게 맞음"
- 로직 확정


#### 사례 2: 손익분기점 계산 검증
**AI 생성 코드 (초기):**
```typescript
const breakEvenMonths = car.purchasePrice / 
  (publicTransportTotalMonthlyCost - carTotalMonthlyCost);
```

**문제 발견:**
- 자동차가 더 비싸면 음수 → Infinity로 처리해야 함
- 감가상각을 이중으로 빼는 오류 (구매가 ÷ 월 절감액인데, 월 절감액에 이미 감가상각 포함)

**ChatGPT-4 검증:**
"손익분기점 = 초기 투자 ÷ 월 절감액"인데, 월 절감액 계산 시 감가상각을 제외해야 함 (이미 초기 투자에 포함)

**수정 후:**
```typescript
const carOperatingCostWithoutDepreciation = carMonthlyCost - depreciationMonthly + carTimeCost;
const monthlySavings = publicTransportTotalMonthlyCost - carOperatingCostWithoutDepreciation;
breakEvenMonths = monthlySavings > 0 ? car.purchasePrice / monthlySavings : Infinity;
```

**재검증 (수동 계산):**
- 차량 구매가: 25,000,000원
- 월 절감액: 200,000원
- 손익분기점: 125개월 (10.4년) - 합리적 범위

#### 사례 3: 한국어 숫자 파싱 프롬프트 최적화
**초기 프롬프트 (Groq):**
```
"2천5백"을 숫자로 변환해줘.
```

**문제:** 2,500 반환 (25,000,000이어야 함)

**Claude 3.5에게 프롬프트 개선 요청:**
- 맥락(questionType)을 명시적으로 제공
- 단위 변환 규칙을 프롬프트에 포함
- 예시를 3개 이상 제공

**개선된 프롬프트:**
```
You are a Korean number parser for a commute cost calculator.
Question type: carPrice (car prices typically 1,000만~10,000만원)
When Korean units like 천/백 are used WITHOUT 만/원, multiply by 10,000.
Example: "2천5백" for carPrice = 2500 * 10000 = 25,000,000
Input: "2천5백"
Return ONLY: {"value": <number>}
```

**결과:** 25,000,000 정확히 반환 (검증 완료)

#### 사례 4: UX 개선 피드백 (Claude 3.5)
**질문:** "시간 가치를 시급으로 환산하는 게 모든 사용자에게 적용될까?"

**Claude 답변:**
- 시간 가치는 주관적이며, 통근 시간을 "일"로 보지 않는 사용자도 많음
- 토글로 포함/제외를 선택할 수 있게 하면 신뢰도 상승
- 기본값은 ON (보수적 계산)

**적용:** includeTimeCost 토글 추가


### 3.4 AI 협업에서 발견한 문제점과 대응

#### 문제 1: AI가 생성한 정규식의 엣지 케이스 누락
**상황:** "2천5백" 파싱 정규식 생성 요청  
**AI 결과:** "천만", "백만", "만" 패턴만 제공  
**누락:** "천"과 "백"이 단독으로 나올 때 처리 안됨  
**대응:** 
- 구체적인 테스트 케이스 제공 ("2천5백", "3천", "5백")
- 각 케이스별 기대 결과 명시
- AI에게 "놓친 패턴 있는지 검토해줘" 요청

#### 문제 2: 계산 로직의 수학적 오류
**상황:** 손익분기점 계산에서 감가상각 이중 차감  
**AI 한계:** 도메인 지식 부족 (회계/재무 개념)  
**대응:**
- ChatGPT-4에게 "손익분기점 계산 공식이 맞는지 검증" 요청
- 수동 계산으로 이중 검증
- 테스트 케이스 작성 (29개) 후 실행

#### 문제 3: 프롬프트 엔지니어링 시행착오
**상황:** Groq에게 한국어 숫자 파싱 요청 시 부정확한 결과  
**시도 1:** "2천5백을 숫자로" → 2,500 (틀림)  
**시도 2:** "carPrice 맥락에서 2천5백" → 2,500 (여전히 틀림)  
**시도 3:** 단위 변환 규칙 + 예시 3개 제공 → 25,000,000 (성공)  
**교훈:** AI에게 맥락과 예시를 충분히 제공해야 정확도 상승

#### 문제 4: AI 생성 코드의 타입 안전성 부족
**상황:** TypeScript 타입 정의 없이 코드 생성  
**대응:**
- 프로젝트 초기에 types/index.ts 먼저 정의
- AI에게 "이 타입을 준수하는 코드 작성해줘" 요청
- getDiagnostics로 타입 오류 즉시 확인

### 3.5 AI 활용의 효과

**정량적 효과:**
- 개발 시간: 예상 20시간 → 실제 12.5시간 (37.5% 단축)
- 코드 커버리지: 96.29% (AI가 테스트 케이스 29개 생성)
- 버그 발견: 계산 로직 오류 3건 사전 발견

**정성적 효과:**
- 도메인 지식 부족 보완 (감가상각, 손익분기점 개념)
- 엣지 케이스 발견 (AI가 "이런 경우는?" 질문 유도)
- UX 개선 아이디어 (시간비용 토글)

**한계:**
- 수학적 정확성은 여전히 수동 검증 필요
- 프롬프트 엔지니어링 시행착오 시간 소요
- AI 생성 코드의 보안/성능 이슈는 별도 검토 필요


---

## 4. 기술 스택 및 아키텍처

### 4.1 기술 선택 근거

| 기술 | 선택 이유 |
|------|----------|
| **Next.js 15** | SSR/SSG 지원, API Routes로 서버 로직 분리, Vercel 배포 간편 |
| **TypeScript** | 타입 안전성, 계산 로직 오류 사전 방지 |
| **Tailwind CSS** | 빠른 스타일링, 반응형 디자인 용이 |
| **Chart.js** | 가볍고 직관적인 차트 라이브러리, React 통합 쉬움 |
| **Groq API** | 무료 쿼터 넉넉 (30 RPM), 빠른 응답 속도 |

### 4.2 프로젝트 구조

```
commute-cost-calculator/
├── app/
│   ├── api/
│   │   └── parse/
│   │       └── route.ts          # Groq API 호출 (서버)
│   ├── components/
│   │   └── ChatCalculator.tsx    # 메인 컴포넌트 (1177줄)
│   ├── types/
│   │   └── index.ts               # TypeScript 타입 정의
│   ├── utils/
│   │   ├── calculator.ts          # 계산 로직
│   │   └── __tests__/
│   │       └── calculator.test.ts # Jest 테스트 (29개)
│   ├── globals.css
│   ├── layout.tsx
│   └── page.tsx
├── .env.local                     # Groq API 키
├── jest.config.js
├── package.json
├── PLANNING.md                    # 본 문서
└── README.md
```

### 4.3 핵심 로직 설명

#### 계산 로직 (calculator.ts)
```typescript
export function calculateCosts(
  commute: CommuteInfo,
  car: CarCosts,
  timeValue: TimeValue
): CalculationResult {
  // 1. 대중교통 비용
  const publicTransportMonthlyCost = commute.publicTransportCost * 2 * commute.workDaysPerMonth;
  const publicTransportTimeCost = (commute.publicTransportTime * 2 * commute.workDaysPerMonth / 60) * timeValue.hourlyWage;
  
  // 2. 자동차 비용
  const monthlyDistance = commute.distance * 2 * commute.workDaysPerMonth;
  const fuelCost = (monthlyDistance / car.fuelEfficiency) * car.fuelPrice;
  const depreciationMonthly = (car.depreciationYears > 0) ? car.purchasePrice / (car.depreciationYears * 12) : 0;
  const carMonthlyCost = depreciationMonthly + fuelCost + car.insurance/12 + car.tax/12 + car.parkingFee + car.tollFee*2*commute.workDaysPerMonth + car.maintenanceFee/12;
  const carTimeCost = (commute.carTime * 2 * commute.workDaysPerMonth / 60) * timeValue.hourlyWage;
  
  // 3. 손익분기점
  const carOperatingCostWithoutDepreciation = carMonthlyCost - depreciationMonthly + carTimeCost;
  const monthlySavings = publicTransportTotalMonthlyCost - carOperatingCostWithoutDepreciation;
  const breakEvenMonths = car.purchasePrice === 0 ? 0 : (monthlySavings > 0 ? car.purchasePrice / monthlySavings : Infinity);
  
  return { publicTransport, car, breakEvenMonths, recommendation };
}
```

**핵심 포인트:**
- 감가상각은 정액법 사용 (구매가 ÷ 사용 기간)
- 시간 비용은 별도 계산 후 토글로 포함/제외
- 손익분기점은 운영비만 비교 (감가상각 제외)


---

## 5. 테스트 및 검증

### 5.1 테스트 전략

**단위 테스트 (Jest):**
- 계산 로직 29개 테스트 케이스
- 코드 커버리지 96.29%
- 엣지 케이스 포함 (0원, Infinity, 음수 등)

**수동 테스트:**
- 실제 사용자 시나리오 5개 시뮬레이션
- 다양한 입력 조합 (한글, 숫자, 차량명 등)
- 브라우저 호환성 (Chrome, Safari, Firefox)

### 5.2 테스트 결과

```bash
PASS  app/utils/__tests__/calculator.test.ts
  calculateCosts
    ✓ 기본 계산 (대중교통 vs 자동차)
    ✓ 시간 비용 포함 계산
    ✓ 감가상각 계산
    ✓ 손익분기점 계산
    ✓ 자동차가 더 비싼 경우 (Infinity)
    ✓ 현재 차량 보유 시 (purchasePrice = 0)
    ✓ 시급 0원 시 시간비용 0
    ... (총 29개)

Test Suites: 1 passed, 1 total
Tests:       29 passed, 29 total
Coverage:    96.29%
```

### 5.3 실제 시나리오 검증

**시나리오 A: 사회초년생 (차량 구매 고민)**
- 입력: 거리 32km, 대중교통 90분, 자동차 50분, 차량 2,500만원, 시급 2만원
- 결과: 시간비용 포함 시 자동차 유리, 제외 시 대중교통 유리
- 검증: 계산 정확, 토글 작동 확인

**시나리오 B: 현재 차량 보유자 (유지 고민)**
- 입력: 현재 차량 1,000만원, 할부금 50만원 × 2개월, 유지 선택
- 결과: 감가상각 0원, 월 유지비만 계산
- 검증: 손익분기점 "해당 없음" 표시 확인

**시나리오 C: 한글 입력**
- 입력: "이천오백만원", "2천5백", "삼천"
- 결과: 각각 25,000,000원, 25,000,000원, 30,000,000원
- 검증: AI 파싱 정확도 확인

**시나리오 D: 시급 모름**
- 입력: 시급 질문에 "몰라"
- 결과: "시간 비용 제외하고 계산" 안내, 시급 0원 처리
- 검증: 시간비용 0원, 토글 OFF와 동일 확인

**시나리오 E: 차량명 입력**
- 입력: "셀토스"
- 결과: "차량명으로는 가격을 알 수 없어요. 가격을 숫자로 입력해주세요!"
- 검증: 재입력 요청 확인


---

## 6. 배포 및 실행

### 6.1 배포 정보

**배포 플랫폼:** Vercel  
**배포 URL:** https://noaats.vercel.app  
**배포 일시:** 2026.02.13  
**빌드 상태:** 성공

### 6.2 로컬 실행 방법

```bash
# 1. 저장소 클론
git clone [repository-url]
cd commute-cost-calculator

# 2. 의존성 설치
npm install

# 3. 환경 변수 설정
# .env.local 파일 생성 후 아래 내용 추가
GROQ_API_KEY=your_groq_api_key_here

# 4. 개발 서버 실행
npm run dev

# 5. 브라우저에서 http://localhost:3000 접속
```

### 6.3 테스트 실행

```bash
# 단위 테스트 실행
npm test

# 커버리지 포함
npm test -- --coverage
```

---

## 7. 한계 및 개선 방향

### 7.1 현재 한계

1. **단일 컴포넌트 구조 (ChatCalculator.tsx 1177줄)**
   - **현상:** 모든 로직이 하나의 컴포넌트에 집중
   - **이유:** MVP 빠른 개발에 집중, 2일 내 완성 우선
   - **의도:** 프로토타입 단계에서는 빠른 반복과 기능 검증을 우선시했고, 구조 최적화는 의도적으로 후순위에 두었다.
   - **장점:** 상태 관리 단순, 디버깅 용이, 프로토타입 단계에 적합
   - **단점:** 확장성 제한, 재사용성 낮음, 테스트 분리 어려움
   - **개선 계획 (Phase 2):**
     ```
     ChatCalculator.tsx (1177줄)
     ↓ 리팩토링
     ├── ChatCalculator.tsx (200줄) - 메인 컨테이너
     ├── hooks/
     │   ├── useCalculatorState.ts - 상태 관리
     │   ├── useInputParser.ts - 입력 파싱 로직
     │   └── useStepFlow.ts - 단계 진행 로직
     ├── components/
     │   ├── ChatMessage.tsx - 메시지 컴포넌트
     │   ├── QuickButtons.tsx - 빠른 답변 버튼
     │   ├── InputForm.tsx - 입력 폼
     │   └── ChartPanel.tsx - 차트 패널
     └── utils/
         └── validation.ts - 범위 검증 로직
     ```
   - **근거:** 실제 서비스라면 상태/프레젠테이션 분리 및 커스텀 훅으로 리팩토링 필수. 하지만 프로토타입 단계에서는 빠른 반복이 우선이므로 단일 컴포넌트가 합리적 선택.

2. **단일 차량 비교만 가능**
   - 여러 차량을 동시에 비교하는 기능 없음
   - 개선: 차량 추가 버튼, 비교 테이블

3. **데이터 저장 없음**
   - 계산 결과를 저장하거나 히스토리 조회 불가
   - 개선: LocalStorage 또는 DB 연동

4. **지역별 대중교통 요금 자동 조회 없음**
   - 사용자가 직접 입력해야 함
   - 개선: 공공 API 연동 (서울 열린데이터광장 등)

5. **모바일 최적화 부족**
   - 반응형은 되지만 모바일 UX 개선 여지
   - 개선: 터치 제스처, 하단 네비게이션

### 7.2 향후 개선 계획

**Phase 2 (추가 기능):**
- 여러 차량 비교
- PDF 리포트 생성
- 공유 기능 (URL 링크)
- 지역별 대중교통 요금 자동 조회

**Phase 3 (고도화):**
- 사용자 계정 및 히스토리
- 실제 유가 API 연동
- 차량 감가 곡선 (정률법 옵션)
- 대출 이자 포함 계산

---

## 8. 결론

### 8.1 프로젝트 성과

**정량적 성과:**
- 개발 시간: 12.5시간
- 코드 커버리지: 96.29%
- 테스트 케이스: 29개
- 배포 완료: Vercel

**정성적 성과:**
- 문제 정의 명확화 (TCO 계산, 시간 가치 환산)
- 실제 사용 가능한 프로토타입 완성
- AI 활용 효과 검증 (개발 시간 37.5% 단축)
- 엣지 케이스 처리 (7개 시나리오)

### 8.2 핵심 학습

1. **문제 정의의 중요성**
   - "자동차 vs 대중교통"이라는 넓은 주제를 "TCO 기반 의사결정 지원"으로 구체화
   - 대상 사용자와 시나리오를 명확히 하니 기능 우선순위가 자연스럽게 결정됨

2. **AI 협업의 효과와 한계**
   - 효과: 빠른 프로토타이핑, 도메인 지식 보완, 엣지 케이스 발견
   - 한계: 수학적 정확성 검증 필요, 프롬프트 엔지니어링 시행착오

3. **반복적 개선의 가치**
   - v0.1 → v0.8까지 8번의 반복
   - 사용자 피드백 반영 (시간비용 토글)
   - 버그 발견 및 수정 (시급 "몰라" 처리)

실제로 저 역시 통근 시간 90분, 편도 3,200원의 상황에서 차량 구매를 고민하며 이 문제를 체감했습니다.
감정이 아닌 데이터로 판단하고 싶다는 개인적 필요에서 시작된 프로젝트입니다.

---

**문서 작성일:** 2026.02.13  
**작성자:** 이동연
**연락처:** ldy195112@naver.com
